syntax = "proto3";

import "google/protobuf/timestamp.proto";

package user;

service User {
    rpc GetUserById (UserId) returns (UserData) {}
    rpc GetUserByUsernameWithPassword (UsernameRequest) returns (GetUserWithPasswordResponse) {}
    rpc GetMultipleUsers (MultipleUsersRequest) returns (MultipleUsers) {}
    rpc CreateUser (CreateUserRequest) returns (UserId) {}
    rpc DeleteUser (UserId) returns (DeleteUserResponse) {}
}

message UserId {
    int32 id = 1;
}

message OptionalUserId{
    optional int32 id = 1;
}

message MultipleUsersRequest {
    repeated UserId ids = 1;
}

message UserData {
    int32 id = 1;
    string username = 2;
    google.protobuf.Timestamp created_at = 3;
}

message MultipleUsers {
    string status = 1;
    repeated UserData users = 2;
    repeated OptionalUserId missed = 3;
}

message UsernameRequest {
    string username = 2;
}

message GetUserWithPasswordResponse {
    int32 user_id = 1;
    bytes password = 2;
}

message CreateUserRequest {
    string username = 1;
    bytes password = 2;
}

message DeleteUserResponse {
    string status = 1;
}
